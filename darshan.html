<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8" />
  <title>Durga Puja Celebration</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
  <!-- Fonts & Icons -->
  <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+Bengali&display=swap" rel="stylesheet" />

  <style>
  body {
      font-family: "Noto Sans Bengali", sans-serif;
      background: linear-gradient(270deg, #ff3e3e, #ff9500, #ffd500, #ff3e8e, #6a00ff);
      background-size: 1200% 1200%;
      animation: backgroundShift 20s ease infinite;
      margin: 0;
      padding: 30px;
      color: #fff;
      text-shadow: 0 0 6px rgba(0,0,0,0.3);
    }

@keyframes backgroundShift {
  0% { background-position: 0% 50%; }
  25% { background-position: 50% 100%; }
  50% { background-position: 100% 50%; }
  75% { background-position: 50% 0%; }
  100% { background-position: 0% 50%; }
}
@keyframes pulseGlow {
  0%, 100% {
    box-shadow: 0 0 30px 10px rgba(255, 80, 0, 0.7);
  }
  50% {
    box-shadow: 0 0 60px 20px rgba(255, 165, 0, 1);
  }
}
/* Add the transparent silhouette overlay */
body::before {
  content: "";
  position: fixed;       /* fixed so it stays on screen during scroll */
  top: 0; left: 0;
  width: 100%;
  height: 100%;
  background-image: url('maadurgaimg.png'); /* your transparent PNG */
  background-position: center center;
  background-repeat: no-repeat;
  background-size: contain; /* or 'cover' if you want it bigger */
  opacity: 0.05;           /* very subtle - adjust as needed */
  pointer-events: none;    /* so it doesn’t block clicks */
  z-index: -1;             /* behind all page content */
}

    h1, h2 {
      text-align: center;
      color: #b30000;
      font-size: 1.2rem;
    }

    #countdown {
      text-align: center;
      font-size: 1rem;
      margin-top: 0;
      color: #cc3300;
      font-weight: 600;
      letter-spacing: 0.05em;
    }

    #tsparticles {
      position: fixed;
      width: 100%;
      height: 100%;
      z-index: -1;
      user-select: none;
    }

  .controls {
  display: flex;
  justify-content: center;
  flex-wrap: wrap;
  gap: 5px;
  margin: 10px;
  text-align: center;
  padding-top: 40px;
}

.flower-wrapper {
  display: flex;
  flex-direction: column;
  align-items: center;
}

#flowerCountDisplay {
  background-color: rgba(255, 255, 255, 0.9);
  padding: 3px 6px;
  border-radius: 15px;
  box-shadow: 0 0 6px rgba(0,0,0,0.1);
  font-size: 0.85rem;
  color: #b34d00;
  margin-bottom: 2px;
}

    button {
      font-size: 0.85rem;
      padding: 6px 12px;
      margin: 5px;
      cursor: pointer;
      border-radius: 8px;
      border: none;
      background: #ffcc80;
      transition: background 0.3s ease;
      user-select: none;
    }
    button:hover, button:focus {
      background: #ffb84d;
      outline: none;
    }

    #wishesWall {
      max-width: 600px;
      margin: 30px auto;
      padding: 20px;
      background: #fffbe6;
      border: 2px dashed #cc9933;
      border-radius: 10px;
      min-height: 150px;
      overflow-y: auto;
      max-height: 300px;
    }

    .wish {
      margin: 4px 0;
      font-style: italic;
      color: #993300;
      animation: fadeIn 1s ease forwards;
      transition: transform 0.3s ease, color 0.3s ease;
      cursor: default;
    }
    .wish:hover {
      color: #b34d00;
      transform: scale(1.05);
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .lights {
      display: flex;
      justify-content: center;
      gap: 5px;
      margin-top: 20px;
      user-select: none;
    }

    .light {
      width: 15px;
      height: 15px;
      border-radius: 50%;
      background: red;
      animation: blink 1.2s infinite;
    }

    .light:nth-child(2) {
      animation-delay: 0.2s;
      background: orange;
    }
    .light:nth-child(3) {
      animation-delay: 0.4s;
      background: yellow;
    }
    .light:nth-child(4) {
      animation-delay: 0.6s;
      background: green;
    }
    .light:nth-child(5) {
      animation-delay: 0.8s;
      background: blue;
    }

    @keyframes blink {
      0%, 100% {
        opacity: 1;
      }
      50% {
        opacity: 0.2;
      }
    }

    .night {
      background: radial-gradient(ellipse at top, #1a1a2e, #000);
      color: white;
    }

    /* Night tweaks */
    .night button {
      background: #996633;
      color: white;
    }
    .night button:hover {
      background: #cc9900;
    }

    .night #countdown {
      color: #ffcc00;
    }

    /* --------------------- */
    /* Virtual Darshan Styles */
    /* --------------------- */

.darshan-section {
  min-height: auto;
  padding: 25px 20px;
  margin: 20px auto;
  max-width: 650px;
  display: block;
  text-align: center;
  transition: all 0.4s ease;
  opacity: 0;
  transform: translateY(30px);
  border-radius: 16px;
  box-shadow:
    0 4px 15px rgba(0,0,0,0.1),
    inset 0 0 20px rgba(255, 255, 255, 0.4);
  position: relative;
  background-repeat: no-repeat;
  background-position: right 20px top 20px;
  background-size: 80px 80px;
  cursor: default;
  /* Make sure background patterns don't interfere with text */
  z-index: 0;
}

.darshan-section.visible {
  opacity: 1;
  transform: translateY(0);
}

/* Vibrant container style with enhanced gradient border and shadows */
.vibrant {
  padding: 25px 30px;
  margin: 25px auto;
  max-width: 650px;
  border-radius: 16px;
  background: linear-gradient(135deg, #fff7ec, #ffe4cc);
  box-shadow:
    0 6px 20px rgba(204, 51, 0, 0.2),
    inset 0 0 15px rgba(255, 230, 200, 0.6);
  border: 3px solid transparent;
  background-origin: border-box;
  background-clip: content-box, border-box;
  transition: box-shadow 0.4s ease, transform 0.4s ease, border-image 0.4s ease;
  outline-offset: 5px;
  outline: none;
  position: relative;
  z-index: 10;
}

/* Shimmering gradient border on hover/focus */
.vibrant:hover,
.vibrant:focus {
  border-image: linear-gradient(45deg, #ff6600, #cc3300, #ff9900, #ff6600) 1;
  box-shadow:
    0 8px 30px rgba(255, 102, 0, 0.7),
    inset 0 0 25px rgba(255, 153, 51, 0.8);
  transform: translateY(-8px);
  cursor: pointer;
}

/* Headings */
.darshan-section h2 {
  font-size: 2rem;
  font-weight: 700;
  margin-bottom: 20px;
  letter-spacing: 0.06em;
  animation: glowPulse 3s ease-in-out infinite;
  /* Remove big blur shadows */
  /* Instead of big blur shadows, small offset shadows only */
  text-shadow:
    0 0 0px #ff6600,
    1px 1px 0px #ff9900,
    2px 2px 0px #ffcc33;
  user-select: none;
}

/* Paragraphs */
.darshan-section p {
  font-size: 1.15rem;
  line-height: 1.6;
  max-width: 520px;
  margin: 0 auto;
  color: #663300;
  font-style: italic;
  text-shadow: 1px 1px 3px #ffe6cc;
}

/* Glowing pulse animation for headings */
@keyframes glowPulse {
  0%, 100% {
    text-shadow:
      0 0 0px #ff6600,
      1px 1px 0px #ff9900,
      2px 2px 0px #ffcc33;
  }
  50% {
    text-shadow:
      0 0 0px #cc3300,
      1px 1px 0px #ff6600,
      2px 2px 0px #ffcc00;
  }
}

/* Unique background patterns (semi-transparent emojis or SVG data URI) */
.section1 {
  background-color: #fff8e1;
  background-image: url("data:image/svg+xml,%3Csvg width='64' height='64' xmlns='http://www.w3.org/2000/svg'%3E%3Ctext x='10' y='50' font-size='48' opacity='0.1'%3E🌼%3C/text%3E%3C/svg%3E");
}

.section2 {
  background-color: #ffe0b2;
  background-image: url("data:image/svg+xml,%3Csvg width='64' height='64' xmlns='http://www.w3.org/2000/svg'%3E%3Ctext x='10' y='50' font-size='48' opacity='0.1'%3E🌸%3C/text%3E%3C/svg%3E");
}

.section3 {
  background-color: #ffccbc;
  background-image: url("data:image/svg+xml,%3Csvg width='64' height='64' xmlns='http://www.w3.org/2000/svg'%3E%3Ctext x='10' y='50' font-size='48' opacity='0.1'%3E🔥%3C/text%3E%3C/svg%3E");
}

.section4 {
  background-color: #f8bbd0;
  background-image: url("data:image/svg+xml,%3Csvg width='64' height='64' xmlns='http://www.w3.org/2000/svg'%3E%3Ctext x='10' y='50' font-size='48' opacity='0.1'%3E💄%3C/text%3E%3C/svg%3E");
}

.section5 {
  background-color: #d1c4e9;
  background-image: url("data:image/svg+xml,%3Csvg width='64' height='64' xmlns='http://www.w3.org/2000/svg'%3E%3Ctext x='10' y='50' font-size='48' opacity='0.1'%3E🌊%3C/text%3E%3C/svg%3E");
}

/* Heading colors per section for vibrancy */
.section1 h2 { color: #d32f2f; }
.section2 h2 { color: #c2185b; }
.section3 h2 { color: #f57c00; }
.section4 h2 { color: #8e24aa; }
.section5 h2 { color: #1976d2; }

/* Night mode */
.night .darshan-section {
  color: white;
  background-color: #2a2a2a !important;
  box-shadow: 0 0 20px rgba(255, 102, 0, 0.9);
  border-color: #ff6600 !important;
  background-image: none !important;
}

/* Glitter overlay */
#glitterOverlay {
  pointer-events: none;
  position: fixed;
  top: 0; left: 0; width: 100%; height: 100%;
  z-index: 999;
  background: radial-gradient(circle, rgba(255, 223, 0, 0.2) 1px, transparent 1px);
  background-size: 20px 20px;
  animation: glitterMove 10s linear infinite;
}

@keyframes glitterMove {
  0% { background-position: 0 0; }
  100% { background-position: 20px 20px; }
}

    /* Scroll hint */
    #scrollHint {
      position: fixed;
      bottom: 10px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 0.85rem;
      color: #b30000;
      animation: bounce 2s infinite;
      user-select: none;
      z-index: 10;
      background: rgba(255 255 255 / 0.8);
      padding: 3px 10px;
      border-radius: 25px;
      box-shadow: 0 2px 8px rgb(179 0 0 / 0.5);
    }

    .night #scrollHint {
      background: rgba(0 0 0 / 0.6);
      color: #ffcc00;
      box-shadow: 0 2px 8px rgb(255 204 0 / 0.6);
    }

    @keyframes bounce {
      0%, 100% {
        transform: translate(-50%, 0);
      }
      50% {
        transform: translate(-50%, -10px);
      }
    }

    /* Wish input form */
    #wishForm {
      text-align: center;
      margin: 20px 0 10px 0;
    }
    #wishInput {
      font-family: 'Noto Serif Bengali', serif;
      font-size: 0.9rem;
      padding: 5px 10px;
      width: 60%;
      max-width: 350px;
      border: 2px solid #cc9933;
      border-radius: 6px;
      outline-offset: 2px;
      transition: border-color 0.3s ease;
    }
    #wishInput:focus {
      border-color: #b34d00;
    }
    #submitWish {
      font-size: 0.85rem;
      padding: 6px 14px;
      margin-left: 8px;
      cursor: pointer;
      border-radius: 6px;
      border: none;
      background: #ffcc80;
      transition: background 0.3s ease;
    }
    #submitWish:hover, #submitWish:focus {
      background: #ffb84d;
      outline: none;
    }

    /* Flower offering display */
    #flowerCountDisplay {
      margin-top: 10px;
      font-weight: 600;
      color: #b34d00;
      user-select: none;
    }

    /* Audio volume control */
    #audioControls {
      margin-top: 10px;
      text-align: center;
      user-select: none;
      color: #cc3300;
    }
    #audioVolume {
      width: 150px;
      vertical-align: middle;
    }

  /* Floating marigold petals */
  .floating-petal {
    position: fixed;
    width: 20px;
    height: 20px;
    background-image: url('https://upload.wikimedia.org/wikipedia/commons/thumb/7/7e/Marigold_flower_single_with_leaves.png/120px-Marigold_flower_single_with_leaves.png');
    background-size: contain;
    background-repeat: no-repeat;
    opacity: 0.7;
    animation-timing-function: linear;
    pointer-events: none;
    will-change: transform;
    z-index: 998;
  }
#offerFlowerBtn {
  position: relative;
  overflow: hidden;
  z-index: 0;
  background-color: #cc3300;
  color: white;
  border: none;
  border-radius: 8px;
  padding: 6px 12px;
  font-size: 0.85rem;
  cursor: pointer;
  transition: background-color 0.3s ease;
}

#offerFlowerBtn:hover {
  background-color: #e64a19;
  box-shadow: 0 0 15px rgba(230, 74, 25, 0.7);
}

/* Ripple container */
#offerFlowerBtn::after {
  content: "";
  position: absolute;
  border-radius: 50%;
  width: 100px;
  height: 100px;
  background: rgba(255, 255, 255, 0.3);
  top: 50%;
  left: 50%;
  pointer-events: none;
  transform: translate(-50%, -50%) scale(0);
  opacity: 0;
  transition: transform 0.6s ease, opacity 1.2s ease;
  z-index: -1;
}

/* Animate ripple on click */
#offerFlowerBtn:active::after {
  transform: translate(-50%, -50%) scale(1);
  opacity: 1;
  transition: transform 0.3s ease, opacity 0.6s ease;
}

/* Subtle pulse animation - infinite */
@keyframes pulseGlow {
  0%, 100% {
    box-shadow: 0 0 8px 0 rgba(255, 102, 0, 0.6);
  }
  50% {
    box-shadow: 0 0 18px 6px rgba(255, 102, 0, 0.9);
  }
}

#offerFlowerBtn {
  animation: pulseGlow 3s infinite ease-in-out;
}
#durgaImage {
  transition: box-shadow 1.5s ease-in-out infinite;
  animation: glowPulse 3s ease-in-out infinite;
}

@keyframes glowPulse {
  0%, 100% {
    box-shadow: 0 0 12px rgba(255, 102, 0, 0.4);
  }
  50% {
    box-shadow: 0 0 20px rgba(255, 102, 0, 0.8);
  }
}
#floatingEmojis {
  position: fixed;
  top: 0; left: 0; width: 100%; height: 100%;
  pointer-events: none;
  overflow: hidden;
  z-index: 999;
}

.floating-emoji {
  position: absolute;
  font-size: 2.5rem;
  animation-name: floatUp;
  animation-timing-function: linear;
  animation-iteration-count: infinite;
  opacity: 0.7;
  user-select: none;
}

.floating-emoji:nth-child(1) {
  left: 10%;
  animation-duration: 12s;
  animation-delay: 0s;
}

.floating-emoji:nth-child(2) {
  left: 30%;
  animation-duration: 15s;
  animation-delay: 3s;
}

.floating-emoji:nth-child(3) {
  left: 50%;
  animation-duration: 10s;
  animation-delay: 1s;
}

.floating-emoji:nth-child(4) {
  left: 70%;
  animation-duration: 18s;
  animation-delay: 5s;
}

.floating-emoji:nth-child(5) {
  left: 85%;
  animation-duration: 14s;
  animation-delay: 2s;
}

@keyframes floatUp {
  0% {
    transform: translateY(100vh) rotate(0deg);
    opacity: 0.7;
  }
  100% {
    transform: translateY(-10vh) rotate(360deg);
    opacity: 0;
  }
}

</style>
</head>
<body>
  <div id="tsparticles"></div>

  <div id="glitterOverlay" aria-hidden="true"></div>

<div id="floatingEmojis" aria-hidden="true">
  <span class="floating-emoji">🌸</span>
  <span class="floating-emoji">🪔</span>
  <span class="floating-emoji">🌺</span>
  <span class="floating-emoji">🪔</span>
  <span class="floating-emoji">🌸</span>
</div>

 <!-- Durga Image with Zoom -->
<div style="text-align:center; margin: 10px 0; position: relative; z-index: 1;">
  <img src="maadurga2024.jpg" alt="Maa Durga 2024"
       id="durgaImage"
       style="max-width: 125px; cursor: zoom-in; border-radius: 12px; border: 3px solid #cc3300; box-shadow: 0 0 12px rgba(255, 102, 0, 0.4);"
       onclick="openZoom()" 
  >
  <p style="font-size: 0.9rem; color: #774400; margin-top: 1px;">আমাদের গত বছরের প্রতিমা</p>
</div>

<h1>🌺 শুভ দুর্গাপূজা ২০২৫ <span id="countdown" aria-live="polite" aria-atomic="true" style="font-weight: 600; color: #b30000; font-size: 1rem;"></span></h1>

<!-- Modal Zoom Viewer with Close Button -->
<div id="zoomModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.85); justify-content:center; align-items:center; z-index:1000; flex-direction:column;">
  <button id="closeZoomBtn"
          style="position: absolute; top: 20px; right: 25px; background: #cc3300; color: white; border: none; font-size: 1rem; padding: 8px 14px; border-radius: 6px; cursor: pointer; z-index: 1100;">
    ✖ Close
  </button>
  <img src="maadurga2024.jpg" alt="Zoomed Maa Durga"
       style="max-width: 90%; max-height: 90%; border-radius: 15px; box-shadow: 0 0 30px rgba(255, 255, 255, 0.6);">
</div>

  <div class="controls" role="region" aria-label="Audio and theme controls">
  <button id="homeBtn" onclick="location.href='index.html'" aria-label="Go to Home Page">🏠 Home</button>
  <button id="audioToggleBtn" onclick="toggleAudio()" aria-pressed="false" aria-label="Play or pause Dhak audio">🔊 Play Dhak</button>
  
  <!-- Wrap flower display + button -->
  <div class="flower-wrapper">
    <div id="flowerCountDisplay"
         aria-live="polite" aria-atomic="true">
      🌸 এখনও কেউ ফুল দেননি।
    </div>
    <button id="offerFlowerBtn" onclick="offerFlower()" aria-label="Offer a flower to Ma Durga">🌸 Offer a Flower</button>
  </div>

  <button id="themeToggleBtn" onclick="toggleTheme()" aria-pressed="false" aria-label="Toggle night mode">🌙 Night Mode</button>
  <button id="resetWishesBtn" aria-label="Reset wishes to default">🔄 Reset Wishes</button>
</div>

  <div id="audioControls" aria-label="Audio volume control" hidden>
    Volume: <input type="range" id="audioVolume" min="0" max="1" step="0.01" value="0.5" aria-valuemin="0" aria-valuemax="1" aria-valuenow="0.5" aria-label="Adjust Dhak audio volume">
  </div>

  <audio id="dhakAudio" loop preload="auto">
    <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" type="audio/mp3" />
  </audio>

  <h2>🙏 Devotee Wishes Wall 🙏</h2>

  <form id="wishForm" aria-label="Add your wish">
    <input
      id="wishInput"
      type="text"
      placeholder="আপনার শুভকামনা লিখুন এবং উৎসব ভাগ করুন..."
      maxlength="100"
      aria-required="true"
      required
      autocomplete="off"
    />
    <button type="submit" id="submitWish">সাবমিট করুন</button>
  </form>

  <div id="wishesWall" aria-live="polite" aria-relevant="additions"></div>

  <div class="lights" id="pandalLights" aria-hidden="true">
    <div class="light"></div>
    <div class="light"></div>
    <div class="light"></div>
    <div class="light"></div>
    <div class="light"></div>
  </div>

  <!-- Virtual Darshan Walkthrough -->
<div class="darshan-section section1 vibrant" tabindex="0" role="region" aria-label="Welcome to the Pandal">
  <h2>🛕 Welcome to the Pandal</h2>
  <p>As you step in, the scent of incense fills the air. The dhak beats resonate in your soul. You bow before Maa Durga with folded hands.</p>
</div>

<div class="darshan-section section2 vibrant" tabindex="0" role="region" aria-label="Pushpanjali Offering">
  <h2>🌸 Pushpanjali Offering</h2>
  <p>You join the devotees in chanting mantras and offering flowers at Maa Durga’s feet, seeking her blessings for peace and strength.</p>
</div>

<div class="darshan-section section3 vibrant" tabindex="0" role="region" aria-label="Dhunuchi Naach">
  <h2>🔥 Dhunuchi Naach</h2>
  <p>Amid rhythmic beats, devotees sway with dhunuchi in hand. The smoke rises, dancing with the divine, uplifting the spirit of celebration.</p>
</div>

<div class="darshan-section section4 vibrant" tabindex="0" role="region" aria-label="Sindur Khela">
  <h2>💄 Sindur Khela</h2>
  <p>Women in red and white sarees smear sindur, celebrating the feminine power and bidding an emotional farewell to the goddess.</p>
</div>

<div class="darshan-section section5 vibrant" tabindex="0" role="region" aria-label="Bisarjan – Goodbye Ma">
  <h2>🌊 Bisarjan – Goodbye Maa</h2>
  <p>The idol is immersed with tearful eyes and hopeful hearts. “আসছে বছর আবার হবে!” – She will return again next year!</p>
</div>

  <div id="scrollHint">👇 Scroll to experience Durga Puja darshan 👇</div>

  <script src="https://cdn.jsdelivr.net/npm/tsparticles@2/tsparticles.bundle.min.js"></script>
  <script>
    // Countdown Logic with hours/minutes/seconds
    const countdown = document.getElementById("countdown");
    const eventDate = new Date("2025-09-29T00:00:00");

    function updateCountdown() {
      const now = new Date();
      const diff = eventDate - now;
      if (diff <= 0) {
        countdown.innerHTML = "🎉 শুভ মহাষষ্ঠী! পূজা শুরু হয়ে গেছে!";
        return;
      }
      const days = Math.floor(diff / (1000 * 60 * 60 * 24));
      const hours = Math.floor((diff / (1000 * 60 * 60)) % 24);
      const minutes = Math.floor((diff / (1000 * 60)) % 60);
      const seconds = Math.floor((diff / 1000) % 60);

      countdown.innerHTML = `⏳ পূজা শুরু হতে আর ${days} দিন ${hours} ঘন্টা ${minutes} মিনিট ${seconds} সেকেন্ড বাকি!`;
    }
    setInterval(updateCountdown, 1000);
    updateCountdown();

    // Dhak Audio
    const audio = document.getElementById("dhakAudio");
    const audioToggleBtn = document.getElementById("audioToggleBtn");
    const audioControls = document.getElementById("audioControls");
    const audioVolume = document.getElementById("audioVolume");

    function toggleAudio() {
      if (audio.paused) {
        audio.play();
        audioToggleBtn.textContent = "🔇 Pause Dhak";
        audioToggleBtn.setAttribute("aria-pressed", "true");
        audioControls.hidden = false;
      } else {
        audio.pause();
        audioToggleBtn.textContent = "🔊 Play Dhak";
        audioToggleBtn.setAttribute("aria-pressed", "false");
        audioControls.hidden = true;
      }
    }

    audioVolume.addEventListener("input", (e) => {
      audio.volume = e.target.value;
      audioVolume.setAttribute("aria-valuenow", e.target.value);
    });
    audio.volume = 0.5;

    // Offer Flower with on-page count display
    let flowerCount = 0;
    const flowerCountDisplay = document.getElementById("flowerCountDisplay");
    const offerFlowerBtn = document.getElementById("offerFlowerBtn");


  // Helper: create a canvas with emoji drawn on it, return as Image
function offerFlower() {
  flowerCount++;
  flowerCountDisplay.textContent = `🌸 আপনি ${flowerCount} টি পুষ্প প্রদান করলেন।`;
  offerFlowerBtn.focus();

  const emojis = ['🌸', '🌺', '🌼'];
  const emojiImages = emojis.map(createEmojiParticle);

  // Wait a short time for all images to load before firing confetti
  setTimeout(() => {
    emojiImages.forEach(img => {
      confetti({
        particleCount: 15,
        spread: 70,
        origin: { y: 0.6 },
        gravity: 0.3,
        scalar: 1.2,
        shapes: ['image'],
        shapeOptions: { image: img }
      });
    });
  }, 300); // 100ms delay to let images load
}

    // Theme Toggle
    let nightMode = false;
    const themeToggleBtn = document.getElementById("themeToggleBtn");

    function toggleTheme() {
      document.body.classList.toggle("night");
      nightMode = !nightMode;
      if (nightMode) {
        themeToggleBtn.textContent = "☀️ Light Mode";
        themeToggleBtn.setAttribute("aria-pressed", "true");
      } else {
        themeToggleBtn.textContent = "🌙 Night Mode";
        themeToggleBtn.setAttribute("aria-pressed", "false");
      }
    }

    // Wishes Wall with dynamic user input and localStorage persistence
    const wishesWall = document.getElementById("wishesWall");
    const wishForm = document.getElementById("wishForm");
    const wishInput = document.getElementById("wishInput");

    // Load wishes from localStorage or default wishes
  const defaultWishes = [
  "🌅 শুভ মহালয়া! মায়ের আগমনের শঙ্খধ্বনি তুলুক হৃদয়ে ভোরের প্রথম আলোয় আশার জ্যোতি।",
  "🌺 মা দুর্গা তুমি করো আশীর্বাদ রূপ, জীবন ভরে উঠুক স্নেহের গূপ্ত সুরে সুপ।",
  "🪔 ঢাকের ছন্দে ফিরে আসুক পুরনো আনন্দের রাগিনী, মিতালির আশা বয়ে যাক হৃদয়ের বীণায় সুর মধুরিনি।",
  "🎉 দুর্গাপূজার উৎসবে দীপ্তি জ্বলে মন, দৃষ্টির সুমধুর শুভেচ্ছায় ছড়াক আনন্দের জনমজন।",
  "🙏 অর্ণবের প্রার্থনা, শক্তি, সাহস ও শান্তির স্রোতে ভরে উঠুক তোমার জীবনভর পথচলা।"
];

    function getStoredWishes() {
      try {
        const stored = localStorage.getItem("pujaWishes");
        if (stored) return JSON.parse(stored);
        return [...defaultWishes];
      } catch {
        return [...defaultWishes];
      }
    }

    function saveWishes(wishes) {
      localStorage.setItem("pujaWishes", JSON.stringify(wishes));
    }

    function renderWishes(wishes) {
      wishesWall.innerHTML = "";
      wishes.forEach((wish, i) => {
        setTimeout(() => {
          const p = document.createElement("p");
          p.className = "wish";
          p.textContent = wish;
          wishesWall.appendChild(p);
        }, i * 200);
      });
    }

    let wishes = getStoredWishes();
    renderWishes(wishes);

    wishForm.addEventListener("submit", (e) => {
      e.preventDefault();
      const newWish = wishInput.value.trim();
      if (!newWish) return;
      wishes.push(newWish);
      saveWishes(wishes);
      renderWishes(wishes);
      wishInput.value = "";
      wishInput.focus();
    });

    // Smooth reveal for virtual darshan sections on scroll
    const darshanSections = document.querySelectorAll(".darshan-section");

    function checkVisibleSections() {
      const triggerBottom = window.innerHeight * 0.85;
      darshanSections.forEach((section) => {
        const rect = section.getBoundingClientRect();
        if (rect.top < triggerBottom) {
          section.classList.add("visible");
        } else {
          section.classList.remove("visible");
        }
      });
    }

    window.addEventListener("scroll", checkVisibleSections);
    window.addEventListener("load", checkVisibleSections);

    // tsParticles fireworks for Durga Puja
    tsParticles.load("tsparticles", {
      fpsLimit: 60,
      background: { color: "transparent" },
      particles: {
        number: { value: 80, density: { enable: true, area: 800 } },
        color: { value: ["#cc0000", "#ff6600", "#ffcc00", "#33cc33", "#3366ff"] },
        shape: { type: "circle" },
        opacity: { value: 0.8, random: true },
        size: { value: 3, random: { enable: true, minimumValue: 1 } },
        move: {
          enable: true,
          speed: 3,
          direction: "bottom",
          random: true,
          outModes: "out"
        }
      },
      interactivity: {
        detectsOn: "canvas",
        events: {
          onClick: { enable: true, mode: "push" },
          onHover: { enable: false }
        },
        modes: {
          push: { quantity: 4 }
        }
      },
      detectRetina: true
    });

document.getElementById('resetWishesBtn').addEventListener('click', () => {
  localStorage.removeItem('pujaWishes');
  wishes = [...defaultWishes];
  saveWishes(wishes);
  renderWishes(wishes);
});

// Zoom modal logic
function openZoom() {
  document.getElementById("zoomModal").style.display = "flex";
}

document.getElementById("closeZoomBtn").addEventListener("click", function () {
  document.getElementById("zoomModal").style.display = "none";
});

</script>

</body>
</html>
