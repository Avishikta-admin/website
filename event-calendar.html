<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="description" content="Official page of Avishikta - I Type - A RWA. Stay informed, get involved, and build a stronger association.">
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
  <meta name="theme-color" content="#000000" />
  
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&family=Playfair+Display:wght@700&display=swap" rel="stylesheet" />

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

  <!-- Your site CSS -->
  <link rel="stylesheet" href="css/responsive-fix.css" />

  <script src="https://cdn.jsdelivr.net/npm/suncalc@1.9.0/suncalc.js"></script>

  <!-- Your layout script with header/sidebar/footer -->
  <script src="layout-loader.js"></script>
  <title>Avishikta - I Type - A | Interactive Event Calendar</title>

<style>
  /* Reset and base */
  body {
    font-family: Arial, sans-serif;
    margin: 20px;
    background: #fafafa;
    color: #333;
  }

  /* Container for top row */
  #topRow {
    display: flex;
    justify-content: space-between;
    gap: 20px;
    margin-bottom: 20px;
  }

  /* Nirghanta and Upcoming Events styling */
  #nirghanta, #upcomingEvents {
    flex: 1 1 45%;
    background: #fff;
    border-radius: 10px;
    padding: 15px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    min-height: 150px;
  }

  /* Calendar container styling */
  #calendarContainer {
  width: 100%;      /* 90% of parent/container width */
  max-width: 1200px; /* max cap */
  margin: 0 auto 20px;
  background: #fff;
  border-radius: 12px;
  padding: 10px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}

  /* Calendar title & buttons */
  #calendarTitle {
    font-weight: 700;
    font-size: 1rem;
    text-align: center;
    margin-bottom: 12px;
  }

  #calendarControls {
    display: flex;
    justify-content: center;
    gap: 8px;
    margin-bottom: 8px;
  }

  #calendarControls button {
    padding: 4px 8px;
    border: none;
    background: #2575fc;
    color: white;
    border-radius: 6px;
    cursor: pointer;
    font-size: 0.85rem;
    transition: background-color 0.3s;
  }

  #calendarControls button:hover {
    background: #155ecf;
  }
  /* 3. Style for the day number inside each day cell */
.day-number {
  font-weight: 600;
  font-size: 0.8rem;
  margin-bottom: 2px;
}

* 4. Container for sunrise/sunset info inside each day */
.sunrise-sunset {
  display: flex;
  flex-direction: column; /* stack sunrise & sunset vertically */
  font-size: 0.55rem;     /* smaller font */
  color: #555;
  gap: 1px;               /* small gap between lines */
  width: 100%;
  justify-content: center;
  align-items: center;
  text-align: center;
}

/* 5. Individual sunrise or sunset row */
.sunrise-sunset div {
  display: flex;
  align-items: center;
  gap: 4px; /* gap between icon and time */
}

/* 6. Sunrise/sunset icon styling (using emojis) */
.sunrise-icon {
  font-size: 0.55rem;
  line-height: 1;
}
  /* Event filters styling */
  #eventTypeFilters {
    display: flex;
    justify-content: center;
    gap: 10px;
    margin-bottom: 8px;
    font-size: 0.85rem;
  }

  #eventTypeFilters label {
    font-weight: 600;
    user-select: none;
    cursor: pointer;
  }

  /* Calendar grid */
#calendarGrid {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 1px; /* reduced from 2px to 1px */
  font-size: 0.75rem;
}

/* Day names styling */
#calendarGrid > div:nth-child(-n+7) {
  font-weight: 700;
  text-align: center;
  padding: 4px 0;
  background: #eaeaea;
  border-radius: 4px;
  user-select: none;
}

/* Day cells */
.day {
  height: 70px; /* keep your height */
  display: flex;
  flex-direction: column; /* stack content vertically */
  align-items: center;    /* center horizontally */
  justify-content: flex-start; /* top align content */
  border-radius: 4px;
  cursor: pointer;
  position: relative;
  padding: 2px 1px 1px 1px; /* reduced padding from 4px 2px 2px 2px */
}

  .day.empty {
    cursor: default;
    background: transparent;
  }

  /* Event day with color and icon */
  .event-day {
    color: #fff;
    font-weight: 600;
  }

  .event-icon {
    position: absolute;
    top: 2px;
    right: 4px;
    font-size: 0.9rem;
  }

  /* Highlight today */
  .today-highlight {
    box-shadow: 0 0 0 2px #2575fc inset;
  }

  /* Modal styles */
  #eventModal[hidden] {
    display: none;
  }
  #eventModal {
    position: fixed;
    inset: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 9999;
  }
  #modalBackdrop {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.5);
  }
  #modalContent {
    position: relative;
    background: white;
    border-radius: 12px;
    padding: 20px;
    max-width: 400px;
    width: 90%;
    box-shadow: 0 8px 20px rgba(0,0,0,0.2);
    z-index: 10;
  }
  #modalTitle {
    margin-bottom: 12px;
  }
  #modalDesc > div {
    margin-bottom: 10px;
  }
  #closeModalBtn {
    background: #2575fc;
    border: none;
    color: #fff;
    padding: 8px 16px;
    border-radius: 8px;
    cursor: pointer;
    font-size: 1rem;
  }
  #closeModalBtn:hover {
    background: #155ecf;
  }

#upcomingEvents {
  flex: 0 0 320px; /* fixed width around 320px */
  max-width: 320px;
  background: #fff;
  border-radius: 10px;
  padding: 15px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  min-height: 150px;
  overflow-y: auto;
}

/* Keep this inside #upcomingEventsList */
#upcomingEventsList {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 10px 15px;
  font-size: 0.85rem;
  line-height: 1.2;
  max-height: 400px;
  overflow-y: auto;
  padding-right: 6px;
}

.event-item {
  padding: 6px 8px;
  border-radius: 6px;
  border: 1px solid #ddd;
  background: #fafafa;
  box-shadow: 0 1px 3px rgba(0,0,0,0.05);
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.event-type {
  font-weight: 700;
  margin: 0;
  font-size: 0.85rem;
  color: #333;
  text-transform: capitalize;
}

.event-name {
  font-size: 0.9rem;
  margin: 0;
  font-weight: 600;
  color: #222;
}

.event-date {
  font-size: 0.75rem;
  color: #666;
  margin: 0;
}

  /* Scroll to top button */
  #scrollToTopBtn {
    position: fixed;
    bottom: 30px;
    right: 30px;
    background: #2575fc;
    color: white;
    border: none;
    padding: 10px 14px;
    border-radius: 50%;
    cursor: pointer;
    display: none;
    font-size: 18px;
    box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    z-index: 10000;
  }
  #scrollToTopBtn:hover {
    background: #155ecf;
  }

  /* Responsive layout */
  @media (max-width: 768px) {
    #topRow {
      flex-direction: column;
      gap: 15px;
    }
    #nirghanta, #upcomingEvents {
      flex: 1 1 100%;
      min-height: auto;
    }

    #calendarContainer {
      max-width: 100%;
      margin-bottom: 20px;
      order: 1;
    }

    #upcomingEvents {
      order: 2;
    }
    #nirghanta {
      order: 3;
    }

    /* Stack in the requested order: calendar, upcoming, nirghanta */
    body {
      display: flex;
      flex-direction: column;
    }

    /* Upcoming events single column on mobile */
    #upcomingEventsList {
      grid-template-columns: 1fr;
    }
  }

/* Nirghanta Table Styling (updated for container fit) */
.nirghanta-container {
  max-width: 1200px;
  margin: 0 auto 20px auto;
  padding: 15px 30px 25px;
  background: #fff9f4;
  border: 8px double #e75480;
  border-radius: 20px;
  box-shadow: 0 0 18px rgba(231, 84, 128, 0.35);
  color: #4b2e3b;
  position: relative;
  overflow: visible;
  box-sizing: border-box;
}

.nirghanta-container::before,
.nirghanta-container::after {
  content: "‚ùÄ";
  font-size: 20px;
  color: #e75480;
  position: absolute;
}

.nirghanta-container::before {
  top: 10px;
  left: 10px;
}

.nirghanta-container::after {
  bottom: 12px;
  right: 12px;
}

.nirghanta-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 10px;
  border-bottom: 2px solid #e75480;
  padding-bottom: 8px;
}

.nirghanta-header h3 {
  margin: 0;
  font-size: 0.8rem;
}

#langToggleBtn {
  background: #e75480;
  border: none;
  border-radius: 25px;
  color: white;
  font-weight: 600;
  padding: 6px 14px;
  cursor: pointer;
  box-shadow: 0 3px 6px rgba(231, 84, 128, 0.6);
  transition: background 0.3s ease;
}

#langToggleBtn:hover {
  background: #d1426e;
}

.nirghanta-note {
  font-style: italic;
  font-size: 0.8rem;
  color: #b55376;
  text-align: center;
  margin-bottom: 20px;
}

.nirghanta-table {
  width: 100%;
  border-collapse: collapse;
  margin-bottom: 25px;
  box-shadow: 0 2px 6px rgba(231, 84, 128, 0.2);
  border-radius: 12px;
  overflow: hidden;
  box-sizing: border-box; /* added for sizing */
}

.nirghanta-table thead tr {
  background: #ffe7f0;
  border-left: 6px solid #e75480;
}

.nirghanta-table th,
.nirghanta-table td {
  padding: 14px 18px;
  border-bottom: 2px solid #e75480;
  text-align: left;
  color: #581c36;
  font-weight: 600;
  font-size: 0.8rem;
  box-sizing: border-box; /* added */
  word-break: break-word; /* added for better text wrap */
}

.nirghanta-table th {
  color: #a31f4b;
  font-size: 0.85rem;
}

.event-name {
  font-weight: 600;
  color: #4b2e3b;
}

.event-time {
  font-style: italic;
  color: #9c3655;
  text-align: right;
  white-space: nowrap;
  font-weight: 500;
}

.nirghanta-table tbody tr {
  background: #fff9f4;
  transition: background 0.4s ease;
}

.nirghanta-table tbody tr:hover {
  background: #ffd1df;
}

/* Responsive tweaks */
@media (max-width: 480px) {
  .nirghanta-container {
    padding: 15px 20px;
    border-width: 6px;
  }

  .nirghanta-header h3 {
    font-size: 0.85rem;
  }

  .nirghanta-table th,
  .nirghanta-table td {
    display: block;
    width: 100%;
    text-align: left;
    padding: 10px 5px;
  }

  .nirghanta-table thead {
    display: none;
  }

  .nirghanta-table tbody tr {
    margin-bottom: 20px;
    display: block;
    border: 2px solid #e75480;
    border-radius: 12px;
    padding: 15px;
  }

  .event-time {
    text-align: left;
    margin-top: 4px;
    color: #b55376;
  }

  #langToggleBtn {
    padding: 6px 10px;
    font-size: 0.9rem;
  }
  #upcomingEvents {
    max-height: 300px;       /* Or any height you want */
    overflow-y: auto;        /* Enable vertical scroll */
    -webkit-overflow-scrolling: touch; /* Smooth scrolling on iOS */
  }
  /* Calendar adjustments */
  #calendarContainer {
    max-width: 100%;
    padding: 5px 10px;
  }

  #calendarGrid {
    font-size: 0.6rem;
    gap: 1px;
  }

  /* Make day cells smaller and less tall */
  .day {
    height: 50px;
    padding: 2px 2px 1px 2px;
  }

  /* Reduce sunrise/sunset font and spacing */
  .sunrise-sunset {
    font-size: 0.45rem;
    gap: 0.3em;
  }

  .sunrise-sunset div {
    gap: 2px;
  }

  .sunrise-sunset div span {
    font-size: 0.5rem;
    line-height: 1;
  }

  /* Optional: hide event icons on very small screens */
  .event-icon {
    display: none;
  }
}

@media (min-width: 1024px) {
  .nirghanta-container {
    max-width: 900px;
  }
}

  /* Base countdown badge (Durga Puja theme) */
  .countdown-badge {
  background-color: #b30000; /* Festive red */
  color: #fff8dc;             /* Light golden */
  font-weight: bold;
  margin-left: 8px;
  padding: 2px 8px;
  border-radius: 12px;
  font-size: 10px;
  display: inline-block;
}

.countdown-glow-pulse {
  animation: glowPulse 1.5s infinite ease-in-out;
  text-shadow: 0 0 6px #ffcc00, 0 0 12px #ffcc00; /* soft golden glow */
}

@keyframes glowPulse {
  0% { transform: scale(1); text-shadow: 0 0 6px #ffcc00; }
  50% { transform: scale(1.1); text-shadow: 0 0 12px #ffcc00; }
  100% { transform: scale(1); text-shadow: 0 0 6px #ffcc00; }
}

</style>
</head>
<body>
<main>

<!-- Calendar container on top for mobile first -->
<div id="calendarContainer">
  <div id="calendarTitle">Loading...</div>

  <div id="calendarControls">
    <button id="prevMonthBtn" aria-label="Previous Month">&lt;</button>
    <button id="todayBtn" aria-label="Today">Today</button>
    <button id="nextMonthBtn" aria-label="Next Month">&gt;</button>
  </div>

  <div id="eventTypeFilters" role="group" aria-label="Filter events by type">
    <label><input type="checkbox" value="religious" checked /> Religious</label>
    <label><input type="checkbox" value="meeting" checked /> Meeting</label>
    <label><input type="checkbox" value="national" checked /> National</label>
    <label><input type="checkbox" value="other" checked /> Other</label>
  </div>

  <div id="calendarGrid" role="grid" aria-label="Calendar days"></div>
</div>

<div id="topRow">
  <section id="nirghantaTimeline" class="nirghanta-container" aria-label="Durga Puja Nirghanta Timeline 2025">
    <div class="nirghanta-header">
      <h3>üîî Durga Puja Nirghanta 2025 (‡¶¶‡ßá‡¶¨‡ßÄ‡¶∞ ‡¶Ü‡¶ó‡¶Æ‡¶® ‡¶ó‡¶ú ‡¶¨‡¶æ ‡¶π‡¶æ‡¶§‡¶ø‡¶§‡ßá | ‡¶¶‡ßá‡¶¨‡ßÄ‡¶∞ ‡¶ó‡¶Æ‡¶® ‡¶¶‡ßã‡¶≤‡¶æ ‡¶¨‡¶æ ‡¶™‡¶æ‡¶≤‡¶ï‡¶ø‡¶§‡ßá)</h3>
      <button id="langToggleBtn" title="Toggle Language" aria-label="Toggle Language">
        üåê Switch to <span id="nextLangLabel">‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ</span>
      </button>
    </div>

    <div class="nirghanta-note">Tap the switch above to toggle between Bengali & English<br>
       <font color="blue"><b>**Disclaimer:**</b> The timings shown below are indicative only. Please consult with priest for the most accurate schedule.</font>
    </div>

    <table class="nirghanta-table" aria-label="Durga Puja Nirghanta Timeline">
      <thead>
        <tr>
          <th>‡¶¶‡¶ø‡¶® (Day)</th>
          <th>‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ (Date)</th>
          <th>‡¶Ö‡¶®‡ßÅ‡¶∑‡ßç‡¶†‡¶æ‡¶®‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ (Event Name)</th>
          <th>‡¶∏‡¶Æ‡¶Ø‡¶º (Timing)</th>
        </tr>
      </thead>
      <tbody>
        <tr class="shasthi">
          <td data-en="üåø Maha Shasthi" data-bn="üåø ‡¶Æ‡¶π‡¶æ‡¶∑‡¶∑‡ßç‡¶†‡ßÄ">üåø Maha Shasthi</td>
          <span class="countdown-badge" id="countdownBadge"></span>
          <td data-en="(28 Sept)" data-bn="(‡ß®‡ßÆ ‡¶∏‡ßá‡¶™‡ßç‡¶ü‡ßá‡¶Æ‡ßç‡¶¨‡¶∞)">(28 Sept)</td>
          <td>
            <span class="event-name" data-en="Bodhon (Invocation of Goddess)" data-bn="‡¶¨‡ßã‡¶ß‡¶® (‡¶Æ‡¶π‡¶æ‡¶∑‡¶∑‡ßç‡¶†‡ßÄ)">
              Bodhon (Invocation of Goddess)
            </span><br/>
            <span class="event-name" data-en="Sandhi Puja Preparation" data-bn="‡¶∏‡¶®‡ßç‡¶ß‡¶ø ‡¶™‡ßÇ‡¶ú‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡¶∏‡ßç‡¶§‡ßÅ‡¶§‡¶ø">
              Sandhi Puja Preparation
            </span>
          </td>
          <td>
            <span class="event-time" data-en="5:30 PM to 7:00 PM" data-bn="‡¶∏‡¶®‡ßç‡¶ß‡ßç‡¶Ø‡¶æ ‡ß´:‡ß©‡ß¶ ‡¶•‡ßá‡¶ï‡ßá ‡¶∏‡¶®‡ßç‡¶ß‡ßç‡¶Ø‡¶æ ‡ß≠:‡ß¶‡ß¶">5:30 PM to 7:00 PM</span>
          </td>
        </tr>

        <tr class="saptami">
          <td data-en="üåÖ Maha Saptami" data-bn="üåÖ ‡¶Æ‡¶π‡¶æ‡¶∏‡¶™‡ßç‡¶§‡¶Æ‡ßÄ">üåÖ Maha Saptami</td>
          <td data-en="(29 Sept)" data-bn="(‡ß®‡ßØ ‡¶∏‡ßá‡¶™‡ßç‡¶ü‡ßá‡¶Æ‡ßç‡¶¨‡¶∞)">(29 Sept)</td>
          <td>
            <span class="event-name" data-en="Nabapatrika Snan (Bathing the nine plants)" data-bn="‡¶®‡¶¨‡¶™‡¶§‡ßç‡¶∞‡¶ø‡¶ï‡¶æ ‡¶∏‡ßç‡¶®‡¶æ‡¶®">
              Nabapatrika Snan
            </span><br/>
            <span class="event-name" data-en="Pratah Puja (Morning worship)" data-bn="‡¶™‡ßç‡¶∞‡¶æ‡¶§‡¶É ‡¶™‡ßÇ‡¶ú‡¶æ">
              Pratah Puja
            </span><br/>
            <span class="event-name" data-en="Pushpanjali (Offering of flowers)" data-bn="‡¶™‡ßÅ‡¶∑‡ßç‡¶™‡¶æ‡¶û‡ßç‡¶ú‡¶≤‡¶ø">
              Pushpanjali
            </span>
          </td>
          <td>
            <span class="event-time" data-en="6:15 AM to 9:30 AM" data-bn="‡¶∏‡¶ï‡¶æ‡¶≤ ‡ß¨:‡ßß‡ß´ ‡¶•‡ßá‡¶ï‡ßá ‡¶∏‡¶ï‡¶æ‡¶≤ ‡ßØ:‡ß©‡ß¶">6:15 AM to 9:30 AM</span>
          </td>
        </tr>

        <tr class="astami">
          <td data-en="üî• Maha Astami" data-bn="üî• ‡¶Æ‡¶π‡¶æ‡¶Ö‡¶∑‡ßç‡¶ü‡¶Æ‡ßÄ">üî• Maha Astami</td>
          <td data-en="(30 Sept)" data-bn="(‡ß©‡ß¶ ‡¶∏‡ßá‡¶™‡ßç‡¶ü‡ßá‡¶Æ‡ßç‡¶¨‡¶∞)">(30 Sept)</td>
          <td>
            <span class="event-name" data-en="Sandhi Puja (Transition worship)" data-bn="‡¶∏‡¶®‡ßç‡¶ß‡¶ø ‡¶™‡ßÇ‡¶ú‡¶æ">
              Sandhi Puja
            </span><br/>
            <span class="event-name" data-en="Kumari Puja (Virgin worship)" data-bn="‡¶ï‡ßÅ‡¶Æ‡¶æ‡¶∞‡ßÄ ‡¶™‡ßÇ‡¶ú‡¶æ">
              Kumari Puja
            </span><br/>
            <span class="event-name" data-en="Astami Puja" data-bn="‡¶Ö‡¶∑‡ßç‡¶ü‡¶Æ‡ßÄ ‡¶™‡ßÇ‡¶ú‡¶æ">
              Astami Puja
            </span>
          </td>
          <td>
            <span class="event-time" data-en="4:30 AM to 12:00 PM" data-bn="‡¶≠‡ßã‡¶∞ ‡ß™:‡ß©‡ß¶ ‡¶•‡ßá‡¶ï‡ßá ‡¶¶‡ßÅ‡¶™‡ßÅ‡¶∞ ‡ßß‡ß®:‡ß¶‡ß¶">4:30 AM to 12:00 PM</span>
          </td>
        </tr>

        <tr class="nabami">
          <td data-en="ü™î Maha Nabami" data-bn="ü™î ‡¶Æ‡¶π‡¶æ‡¶®‡¶¨‡¶Æ‡ßÄ">ü™î Maha Nabami</td>
          <td data-en="(1 Oct)" data-bn="(‡ßß ‡¶Ö‡¶ï‡ßç‡¶ü‡ßã‡¶¨‡¶∞)">(1 Oct)</td>
          <td>
            <span class="event-name" data-en="Nabami Puja" data-bn="‡¶®‡¶¨‡¶Æ‡ßÄ ‡¶™‡ßÇ‡¶ú‡¶æ">
              Nabami Puja
            </span><br/>
            <span class="event-name" data-en="Bhog Offering" data-bn="‡¶≠‡ßã‡¶ó ‡¶Ü‡¶∞‡¶§‡¶ø">
              Bhog Offering
            </span>
          </td>
          <td>
            <span class="event-time" data-en="8:00 AM to 11:00 AM" data-bn="‡¶∏‡¶ï‡¶æ‡¶≤ ‡ßÆ:‡ß¶‡ß¶ ‡¶•‡ßá‡¶ï‡ßá ‡¶∏‡¶ï‡¶æ‡¶≤ ‡ßß‡ßß:‡ß¶‡ß¶">8:00 AM to 11:00 AM</span>
          </td>
        </tr>

        <tr class="dashami">
          <td data-en="üåä Maha Dashami" data-bn="üåä ‡¶Æ‡¶π‡¶æ‡¶¶‡¶∂‡¶Æ‡ßÄ">üåä Maha Dashami</td>
          <td data-en="(2 Oct)" data-bn="(‡ß® ‡¶Ö‡¶ï‡ßç‡¶ü‡ßã‡¶¨‡¶∞)">(2 Oct)</td>
          <td>
            <span class="event-name" data-en="Sindoor Khela (Vermilion game)" data-bn="‡¶∏‡¶ø‡¶Å‡¶¶‡ßÅ‡¶∞ ‡¶ñ‡ßá‡¶≤‡¶æ">
              Sindoor Khela
            </span><br/>
            <span class="event-name" data-en="Bisarjan (Immersion of the idol)" data-bn="‡¶¨‡¶ø‡¶∏‡¶∞‡ßç‡¶ú‡¶®">
              Visarjan
            </span>
          </td>
          <td>
            <span class="event-time" data-en="10:00 AM to 4:00 PM" data-bn="‡¶∏‡¶ï‡¶æ‡¶≤ ‡ßß‡ß¶:‡ß¶‡ß¶ ‡¶•‡ßá‡¶ï‡ßá ‡¶¨‡¶ø‡¶ï‡ßá‡¶≤ ‡ß™:‡ß¶‡ß¶">10:00 AM to 4:00 PM</span>
          </td>
        </tr>
      </tbody>
    </table>
  </section>

  <div id="upcomingEvents" tabindex="0" aria-label="Upcoming Events">
    <h2 style="font-size: 18px; color: #0056A4;">Upcoming Events</h2>
    <div id="upcomingEventsList" role="list" aria-live="polite">
      <!-- Populated dynamically -->
    </div>
  </div>
</div>

<!-- Event Details Modal -->
<div id="eventModal" role="dialog" aria-modal="true" aria-labelledby="modalTitle" aria-describedby="modalDesc" tabindex="-1" hidden>
  <div id="modalBackdrop"></div>
  <div id="modalContent">
    <h2 id="modalTitle"></h2>
    <div id="modalDesc"></div>
    <button id="closeModalBtn">Close</button>
  </div>
</div>
</main>
<button id="scrollToTopBtn" aria-label="Scroll to top">‚¨Ü</button>

<script>
  // Variables
  let eventModal, modalTitle, modalDesc, closeModalBtn;

  const eventColors = {
    religious: '#d1b3e0',
    meeting: '#27ae60',
    national: '#e67e22',
    other: '#3498db'
  };

  const eventIcons = {
    religious: 'üôè',
    meeting: 'üìÖ',
    national: 'üéÜ',
    other: 'üìå'
  };

  const eventsData = {
    "2025-08-15": [{ type: "national", name: "Independence Day" }],
    "2025-08-25": [{ type: "other", name: "Valve Repair" }],
    "2025-08-27": [{ type: "religious", name: "Ganesh Chaturthi" }],
    "2025-09-05": [{ type: "national", name: "Teacher's Day" }],
    "2025-09-17": [{ type: "religious", name: "Biswakarma Puja" }],
    "2025-09-21": [{ type: "religious", name: "Mahalaya" }],
    "2025-09-29": [{ type: "religious", name: "Maha Saptami" }],
    "2025-09-30": [{ type: "religious", name: "Maha Astami" }],
    "2025-10-01": [{ type: "religious", name: "Maha Nabami" }],
    "2025-10-02": [{ type: "religious", name: "Bijoya Dasami" }],
  };

  let currentYear, currentMonth;

  window.onload = () => {
    eventModal = document.getElementById('eventModal');
    modalTitle = document.getElementById('modalTitle');
    modalDesc = document.getElementById('modalDesc');
    closeModalBtn = document.getElementById('closeModalBtn');

    closeModalBtn.onclick = () => {
      eventModal.hidden = true;
    };
    document.getElementById('modalBackdrop').onclick = () => {
      eventModal.hidden = true;
    };
    window.addEventListener('keydown', e => {
      if (e.key === 'Escape' && !eventModal.hidden) {
        eventModal.hidden = true;
      }
    });

    document.querySelectorAll('#eventTypeFilters input[type="checkbox"]').forEach(chk => {
      chk.addEventListener('change', () => {
        generateCalendar();
        populateUpcomingEvents();
      });
    });

    document.getElementById('todayBtn').addEventListener('click', () => {
      const today = new Date();
      currentYear = today.getFullYear();
      currentMonth = today.getMonth();
      generateCalendar();
      highlightToday();
      populateUpcomingEvents();
    });

    document.getElementById('prevMonthBtn').addEventListener('click', () => {
      currentMonth--;
      if (currentMonth < 0) {
        currentMonth = 11;
        currentYear--;
      }
      generateCalendar();
      highlightToday();
      populateUpcomingEvents();
    });

    document.getElementById('nextMonthBtn').addEventListener('click', () => {
      currentMonth++;
      if (currentMonth > 11) {
        currentMonth = 0;
        currentYear++;
      }
      generateCalendar();
      highlightToday();
      populateUpcomingEvents();
    });

    // Scroll to top button logic
    const scrollBtn = document.getElementById('scrollToTopBtn');
    window.addEventListener('scroll', () => {
      if (window.scrollY > 200) {
        scrollBtn.style.display = 'block';
      } else {
        scrollBtn.style.display = 'none';
      }
    });

    scrollBtn.addEventListener('click', () => {
      window.scrollTo({ top: 0, behavior: 'smooth' });
    });

    // Initialize calendar with today
    const today = new Date();
    currentYear = today.getFullYear();
    currentMonth = today.getMonth();
    generateCalendar();
    highlightToday();
    populateUpcomingEvents();
  };

  //to calculate sunrise and sunset time for each date

  function generateCalendar() {
  const calendarGrid = document.getElementById('calendarGrid');
  const calendarTitle = document.getElementById('calendarTitle');
  calendarGrid.innerHTML = '';

  // Set title like "August 2025"
  const monthNames = [
    "January", "February", "March", "April", "May", "June",
    "July", "August", "September", "October", "November", "December"
  ];
  calendarTitle.textContent = `${monthNames[currentMonth]} ${currentYear}`;

  // Day names header
  const dayNames = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
  for (const dayName of dayNames) {
    const dayHeader = document.createElement('div');
    dayHeader.textContent = dayName;
    dayHeader.setAttribute('role', 'columnheader');
    calendarGrid.appendChild(dayHeader);
  }

  // First day of month index
  const firstDay = new Date(currentYear, currentMonth, 1).getDay();
  // Number of days in month
  const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();

  // Add empty cells for days before month start
  for (let i = 0; i < firstDay; i++) {
    const emptyCell = document.createElement('div');
    emptyCell.className = 'day empty';
    emptyCell.setAttribute('aria-hidden', 'true');
    calendarGrid.appendChild(emptyCell);
  }

  // Get selected event types for filtering
  const selectedTypes = Array.from(
    document.querySelectorAll('#eventTypeFilters input[type="checkbox"]:checked')
  ).map(cb => cb.value);

  // Kolkata coordinates
  const latitude = 22.5726;
  const longitude = 88.3639;

  // Fill days
  for (let day = 1; day <= daysInMonth; day++) {
    const dayCell = document.createElement('div');
    dayCell.className = 'day';
    dayCell.tabIndex = 0;

    // Create and append day number container
    const dayNumber = document.createElement('div');
    dayNumber.className = 'day-number';
    dayNumber.textContent = day;
    dayCell.appendChild(dayNumber);

    const dateKey = `${currentYear}-${String(currentMonth + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
    dayCell.setAttribute('data-date', dateKey);

    // üåÖ Calculate sunrise and sunset
    const dateObj = new Date(currentYear, currentMonth, day);
    const sunTimes = SunCalc.getTimes(dateObj, latitude, longitude);

    const sunriseTime = sunTimes.sunrise.toLocaleTimeString([], {
      hour: '2-digit',
      minute: '2-digit',
      hour12: true
    });

    const sunsetTime = sunTimes.sunset.toLocaleTimeString([], {
      hour: '2-digit',
      minute: '2-digit',
      hour12: true
    });

    // üåá Add sunrise/sunset to cell
    const sunInfo = document.createElement('div');
    sunInfo.className = 'sunrise-sunset';
    sunInfo.innerHTML = `
      <div><span class="sunrise-icon">üåÖ</span> ${sunriseTime}</div>
      <div><span class="sunrise-icon">üåá</span> ${sunsetTime}</div>
    `;
    dayCell.appendChild(sunInfo);

    // üéØ Event logic
    if (eventsData[dateKey]) {
      const filteredEvents = eventsData[dateKey].filter(ev => selectedTypes.includes(ev.type));
      if (filteredEvents.length > 0) {
        dayCell.classList.add('event-day');
        dayCell.style.backgroundColor = eventColors[filteredEvents[0].type];

        const iconSpan = document.createElement('span');
        iconSpan.className = 'event-icon';
        iconSpan.textContent = eventIcons[filteredEvents[0].type];
        dayCell.appendChild(iconSpan);

        dayCell.addEventListener('click', () => {
          showEventDetails(dateKey, filteredEvents);
        });

        dayCell.addEventListener('keypress', e => {
          if (e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            showEventDetails(dateKey, filteredEvents);
          }
        });
      }
    }

    calendarGrid.appendChild(dayCell);
  }
}



  function showEventDetails(dateKey, events) {
    modalTitle.textContent = `Events on ${dateKey}`;
    modalDesc.innerHTML = '';
    for (const ev of events) {
      const evDiv = document.createElement('div');
      evDiv.textContent = `${ev.name} (${ev.type})`;
      evDiv.style.color = eventColors[ev.type];
      modalDesc.appendChild(evDiv);
    }
    eventModal.hidden = false;
    eventModal.focus();
  }

  function highlightToday() {
    const today = new Date();
    if (today.getFullYear() === currentYear && today.getMonth() === currentMonth) {
      const dayNumber = today.getDate();
      const calendarGrid = document.getElementById('calendarGrid');
      // Days start after 7 day headers and some empty cells (firstDay)
      const firstDay = new Date(currentYear, currentMonth, 1).getDay();
      const index = 7 + firstDay + dayNumber - 1;
      const dayCells = calendarGrid.querySelectorAll('.day');
      if (dayCells[index - 7]) {
        dayCells[index - 7].classList.add('today-highlight');
      }
    }
  }

  function populateUpcomingEvents() {
    const upcomingList = document.getElementById('upcomingEventsList');
    upcomingList.innerHTML = '';

    const selectedTypes = Array.from(document.querySelectorAll('#eventTypeFilters input[type="checkbox"]:checked')).map(cb => cb.value);
    const today = new Date();

    // Collect upcoming events from today forward
    let upcomingEvents = [];
    for (const dateKey in eventsData) {
      const eventDate = new Date(dateKey);
      if (eventDate >= today) {
        const filteredEvents = eventsData[dateKey].filter(ev => selectedTypes.includes(ev.type));
        if (filteredEvents.length > 0) {
          for (const ev of filteredEvents) {
            upcomingEvents.push({ dateKey, event: ev });
          }
        }
      }
    }

    // Sort ascending by date
    upcomingEvents.sort((a, b) => new Date(a.dateKey) - new Date(b.dateKey));

    if (upcomingEvents.length === 0) {
      const noEvents = document.createElement('div');
      noEvents.textContent = "No upcoming events.";
      upcomingList.appendChild(noEvents);
      return;
    }

    // Populate list with two columns layout from CSS
    for (const { dateKey, event } of upcomingEvents) {
      const evDiv = document.createElement('div');
      evDiv.className = 'event-item';

      const typeDiv = document.createElement('div');
      typeDiv.className = 'event-type';
      typeDiv.textContent = event.type.charAt(0).toUpperCase() + event.type.slice(1);

      const nameDiv = document.createElement('div');
      nameDiv.className = 'event-name';
      nameDiv.textContent = event.name;

      const dateDiv = document.createElement('div');
      dateDiv.className = 'event-date';
      dateDiv.textContent = dateKey;

      evDiv.appendChild(typeDiv);
      evDiv.appendChild(nameDiv);
      evDiv.appendChild(dateDiv);

      upcomingList.appendChild(evDiv);
    }
  }

 // Maha Shasthi date
const langToggleBtn = document.getElementById("langToggleBtn");
const nextLangLabel = document.getElementById("nextLangLabel");
let currentLang = "en"; // Default language

const countdownTranslations = {
  en: {
    daysLeft: "days left",
    today: "Today!",
    passed: "Passed"
  },
  bn: {
    daysLeft: "‡¶¶‡¶ø‡¶® ‡¶¨‡¶æ‡¶ï‡¶ø",
    today: "‡¶Ü‡¶ú!",
    passed: "‡¶∂‡ßá‡¶∑ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá"
  }
};

function updateCountdownText(lang) {
  const badge = document.getElementById("countdownBadge");
  const mahaShasthiDate = new Date("2025-09-28T00:00:00");
  const today = new Date();
  const timeDiff = mahaShasthiDate - today;
  const daysRemaining = Math.ceil(timeDiff / (1000 * 60 * 60 * 24));

  // Always reset badge background to festive red
  badge.style.backgroundColor = "#b30000";

  if (daysRemaining > 0) {
    badge.textContent = ` (${daysRemaining} ${countdownTranslations[lang].daysLeft})`;
    badge.style.color = "#fff8dc";  // Light golden for readability on red bg
    badge.style.fontWeight = "bold";
    badge.classList.add("countdown-badge", "countdown-glow-pulse");
  } else if (daysRemaining === 0) {
    badge.textContent = ` (${countdownTranslations[lang].today})`;
    badge.style.color = "#ffcc00";  // bright golden/yellow for today
    badge.style.fontWeight = "bold";
    badge.classList.add("countdown-badge");
    badge.classList.remove("countdown-glow-pulse");
  } else {
    badge.textContent = "";
    badge.style.display = "none"; // üî• hides the badge completely
  }
}

function toggleLanguage() {
  currentLang = currentLang === "en" ? "bn" : "en";
  const targetAttr = `data-${currentLang}`;

  const elements = document.querySelectorAll("[data-en][data-bn]");
  elements.forEach(el => {
    // Skip countdownBadge explicitly (good practice)
    if (el.id === "countdownBadge") return;

    const newText = el.getAttribute(targetAttr);
    if (newText) {
      el.textContent = newText;
    }
  });

  // Update toggle button label
  nextLangLabel.textContent = currentLang === "en" ? "‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ" : "English";

  // Update countdown text to new language
  updateCountdownText(currentLang);
}

// Attach event listener for toggle button
langToggleBtn.addEventListener("click", toggleLanguage);

// On page load, initialize countdown text
updateCountdownText(currentLang);

</script>

</body>
</html>
