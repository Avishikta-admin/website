<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Official page of Avishikta - I Type - A RWA. Stay informed, get involved, and build a stronger association.">
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
  <!-- Confetti script from CDN -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
  <script src="layout-loader.js"></script>

  <title>View Announcements</title>

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Merriweather&family=Poppins:wght@600&display=swap" rel="stylesheet"/>

  <style>
    :root {
      --durga-color: #ff6f61;
      --ganesh-color: #ffb347;
      --biswakarma-color: #7ea9f8;
      --default-color: #6e8efb;
      --border-radius: 14px;
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
  background: linear-gradient(135deg, #fff7f0, #f0faff);
  font-family: 'Merriweather', serif;
  color: #2a2a2a;
  padding: 2rem 1rem;
  display: flex;
  flex-direction: column;
  align-items: center;
  min-height: 100vh;
}

h1 {
  font-family: 'Poppins', sans-serif;
  font-weight: 700;
  font-size: 1.75rem;
  color: #4a148c;
  margin-bottom: 1.8rem;
  text-align: center;
  line-height: 1.4;
  background: linear-gradient(to right, #ff6f61, #7ea9f8);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}
    #filter {
      margin-bottom: 1.5rem;
      padding: 0.4rem 0.6rem;
      font-size: 0.90rem;
      border-radius: 6px;
      border: 1px solid #ccc;
    }
    #announcements-container {
      max-width: 900px;
      width: 100%;
      display: flex;
      flex-direction: column;
      gap: 1.2rem;
    }
    .flyer-card {
      position: relative;
      padding: 1.8rem 1.5rem 1.6rem;
      border-radius: var(--border-radius);
      background: white;
      box-shadow: 0 4px 14px rgba(0,0,0,0.08);
      transition: transform 0.3s ease;
    }
    .flyer-card:hover { transform: scale(1.02); }
    .flyer-card.durga { border-left: 6px solid var(--durga-color); background-color: #ffe6e1;color: #4a148c;}
    .flyer-card.ganesh { border-left: 6px solid var(--ganesh-color); background-color: #fff5e6;color: #bf6e00;}
    .flyer-card.biswakarma { border-left: 6px solid var(--biswakarma-color); background-color: #e7f0ff;color: #34568a;}
    .flyer-card.default { border-left: 6px solid var(--default-color); background-color: #f0f4ff;color: #2a2a2a;}
    .flyer-icon {
      position: absolute;
      top: -20px;
      left: 20px;
      width: 48px;
      height: 48px;
      border-radius: 50%;
      font-size: 26px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: bold;
      box-shadow: 0 2px 6px rgba(0,0,0,0.15);
    }
    .flyer-icon.durga { background-color: var(--durga-color); }
    .flyer-icon.ganesh { background-color: var(--ganesh-color); }
    .flyer-icon.biswakarma { background-color: var(--biswakarma-color); }
    .flyer-icon.default { background-color: var(--default-color); }
    h2 {
      font-family: 'Poppins', sans-serif;
      font-weight: 600;
      font-size: 1.25rem;
      margin-top: 1rem;
      margin-bottom: 0.3rem;
      padding-left: 60px;
      color: #333;
    }
    .countdown {
      font-size: 0.95rem;
      color: #e53935;
      font-weight: 500;
      margin-bottom: 0.6rem;
      padding-left: 60px;
    }
    .section-header.date {
      font-family: 'Poppins', sans-serif;
      font-size: 0.95rem;
      color: #666;
      margin-bottom: 0.6rem;
      padding-left: 60px;
    }
    .section-content {
      font-size: 0.98rem;
      line-height: 1.6;
      color: #444;
      text-align: justify;
      padding-left: 60px;
    }
    .footer-note {
      font-size: 0.85rem;
      color: #888;
      margin-top: 1rem;
      text-align: right;
      padding-right: 0.8rem;
    }
    .surprise-box {
      margin: 1rem 0 0 60px;
      cursor: pointer;
      color: #00695c;
      font-weight: 500;
      text-decoration: underline;
    }
    .surprise-content {
      margin: 0.5rem 0 0 60px;
      font-size: 0.95rem;
      color: #004d40;
    }
    #scrollToTop {
      position: fixed;
      bottom: 50px;
      right: 20px;
      background-color: var(--default-color);
      color: white;
      border: none;
      border-radius: 50%;
      padding: 8px 10px;
      font-size: 14px;
      cursor: pointer;
      box-shadow: 0 3px 8px rgba(0,0,0,0.2);
      display: none;
      transition: background 0.3s ease;
      z-index: 1000;
    }
    #scrollToTop:hover { background-color: var(--durga-color); }
    @media (max-width: 600px) {
      .flyer-card { padding: 1.4rem 1rem; }
      h2 { font-size: 1.1rem; padding-left: 52px; }
      .section-header.date, .section-content, .countdown, .surprise-box, .surprise-content { padding-left: 52px; }
      .flyer-icon { width: 42px; height: 42px; font-size: 22px; }
    }
    .fancy-surprise {
  background: linear-gradient(135deg, #fdfbfb, #ebedee);
  border: 1px dashed #ccc;
  padding: 1rem;
  margin-top: 0.6rem;
  border-radius: 12px;
  font-size: 1rem;
  color: #4a148c;
  animation: fadeIn 0.6s ease-in-out;
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  line-height: 1.6;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}
  </style>
</head>
<body>
  <h1>üì¢ Latest Announcements & Upcoming Celebrations at Avishikta</h1>
  <select id="filter">
    <option value="all">Show All</option>
    <option value="ganesh">Ganesh Chaturthi</option>
    <option value="durga">Durga Puja</option>
    <option value="biswakarma">Biswakarma Puja</option>
  </select>

  <main id="announcements-container"></main>
  <button id="scrollToTop" title="Back to Top">‚¨ÜÔ∏è</button>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      fetch('notices.json')
        .then(res => res.ok ? res.json() : Promise.reject(res))
        .then(data => initAnnouncements(data))

      const filter = document.getElementById('filter');
      filter.addEventListener('change', () => {
        fetch('notices.json').then(res => res.json()).then(data => initAnnouncements(data));
      });

      function initAnnouncements(data) {
        const container = document.getElementById('announcements-container');
        container.innerHTML = '';
        const filterVal = filter.value;
        data.forEach(notice => {
          if (filterVal !== 'all' && notice.theme !== filterVal) return;
          const theme = notice.theme || 'default';
          const article = document.createElement('article');
          article.className = `flyer-card ${theme}`;

          let eventDate, formattedDate = 'Date not specified';
          if (notice.startDate && notice.endDate) {
            eventDate = new Date(notice.startDate);
            formattedDate = `${new Date(notice.startDate).toLocaleDateString()} ‚Äì ${new Date(notice.endDate).toLocaleDateString()}`;
          } else if (notice.date) {
            eventDate = new Date(notice.date);
            formattedDate = eventDate.toLocaleDateString(undefined, {year:'numeric', month:'long', day:'numeric'});
          }

          // Create dynamic countdown span
          const countdownId = `cd-${Math.random().toString(36).substr(2,9)}`;
          let countdownHtml = '';
          if (eventDate && eventDate > new Date()) {
            countdownHtml = `<div id="${countdownId}" class="countdown"></div>`;
          }

          article.innerHTML = `
            <div class="flyer-icon ${theme}">${notice.icon}</div>
            <h2>${notice.title}</h2>
            ${countdownHtml}
            <div class="section-header date">üìÖ ${formattedDate}</div>
            <div class="section-content">${notice.content}</div>
            <p class="surprise-box">üéÅ Tap here for a special message</p>
		<div class="surprise-content fancy-surprise" style="display:none;">
  		üå† <strong>Let‚Äôs make every moment magical together.</strong><br>
  		ü§ù Cheers from üè° <em>Avishikta - I Type ‚Äë A RWA</em> family!
                <br /><button class="close-surprise">‚ùå Close</button>
	        </div>

            <div class="footer-note">${notice.footer || ''}</div>
          `;
          container.appendChild(article);

          const surpriseBtn = article.querySelector('.surprise-box');
const surpriseContent = article.querySelector('.surprise-content');
const closeBtn = article.querySelector('.close-surprise');
let surpriseShown = false;

surpriseBtn.addEventListener('click', () => {
  surpriseContent.style.display = 'block';

  if (!surpriseShown) {
    confetti({
      particleCount: 100,
      spread: 70,
      origin: { y: 0.6 }
    });
    surpriseShown = true;
  }
});

closeBtn.addEventListener('click', () => {
  surpriseContent.style.display = 'none';
});

          // Initialize countdown if present
          if (countdownHtml) {
            const countdownEl = document.getElementById(countdownId);
            tickCountdown(countdownEl, eventDate);
            setInterval(() => tickCountdown(countdownEl, eventDate), 1000);
          }

          // Confetti trigger for festivals
          if (['ganesh', 'durga'].includes(theme)) {
            confetti({ particleCount: 100, spread: 70, origin: { y: 0.4 } });
          }
        });
      }

      function tickCountdown(el, targetDate) {
        const diff = targetDate - new Date();
        if (diff <= 0) return void (el.textContent = '‚è≥ Happening now!');
        const days = Math.floor(diff / 864e5);
        const hrs = Math.floor((diff % 864e5) / 36e5);
        const mins = Math.floor((diff % 36e5) / 6e4);
        const secs = Math.floor((diff % 6e4) / 1000);
        el.textContent = `‚è≥ ${days}d ${hrs}h ${mins}m ${secs}s left`;
      }

      // Scroll-to-top logic
      const scrollBtn = document.getElementById('scrollToTop');
      window.addEventListener('scroll', () => scrollBtn.style.display = window.scrollY > 200 ? 'block' : 'none');
      scrollBtn.addEventListener('click', () => window.scrollTo({ top: 0, behavior: 'smooth' }));
    });
  </script>

<script>
  const isGitHub = location.hostname.includes('github.io');
  const base = isGitHub ? '/website' : '';

  const manifest = document.createElement('link');
  manifest.rel = 'manifest';
  manifest.href = base + '/manifest.json';

  const themeMeta = document.createElement('meta');
  themeMeta.name = 'theme-color';
  themeMeta.content = '#000000';

  document.head.appendChild(manifest);
  document.head.appendChild(themeMeta);

  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register(base + '/service-worker.js', { scope: base + '/' })
      .then(() => console.log('‚úÖ Service Worker registered'))
      .catch(err => console.error('‚ùå Service Worker failed', err));
  }
</script>

</body>
</html>





