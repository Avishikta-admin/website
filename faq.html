<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Official page of Avishikta - I Type - A RWA. Stay informed, get involved, and build a stronger association.">
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
  <!-- Confetti script from CDN -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
  <script src="layout-loader.js"></script>

  <title>FAQs | Avishikta -1 Type-A RWA</title>
  <link rel="icon" href="favicon.ico" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=Poppins:wght@600&display=swap" rel="stylesheet">

  <style>
    *, *::before, *::after { box-sizing: border-box; }

  body {
  margin: 0;
  min-height: 100vh;
  background-image: url('https://images.unsplash.com/photo-1506744038136-46273834b3fb?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80');
  background-size: cover;
  background-position: center center;
  background-repeat: no-repeat;
  background-attachment: fixed;
  font-family: 'Inter', sans-serif;
  color: #2c3e50;
}
html {
  scroll-behavior: smooth;
}

h1 span, p.subtitle span {
  transition: transform 0.3s ease;
  display: inline-block;
}

h1 span:hover, p.subtitle span:hover {
  transform: rotate(15deg) scale(1.2);
  cursor: default;
}

    /* ✅ Breadcrumb Styles */
    .breadcrumb {
      position: relative;
      font-size: 0.9rem;
      color: #f5f5dc;
      background-color: #003366;
      padding: 6px 12px;
      margin: 10px 0 20px 0;
      border-radius: 6px;
      display: inline-block;
      box-shadow: 0 2px 6px rgba(0,0,0,0.3);
      user-select: none;
      z-index: 1000;
      white-space: nowrap;
    }

    .breadcrumb a {
      color: #f5f5dc;
      text-decoration: none;
      font-weight: 600;
    }

    .breadcrumb a:hover {
      text-decoration: underline;
      color: #fff;
    }

    .breadcrumb span {
      font-weight: 600;
      color: #f5f5dc;
    }

  main {
  background: rgba(255, 255, 255, 0.9); /* slightly transparent so bg shows through */
  max-width: 850px;
  width: 100%;
  border-radius: 14px;
  box-shadow: 0 10px 24px rgba(42, 114, 216, 0.12);
  padding: 30px 40px 40px;
  animation: fadeInUp 0.6s ease forwards;
  box-sizing: border-box;
  margin: 0 auto; /* center fallback */
}

    h1 {
      font-family: 'Poppins', sans-serif;
      text-align: center;
      color: #2a72d8;
      font-size: 2.3rem;
      margin: 0 0 10px;
      font-weight: 700;
      border-bottom: 3px solid #2a72d8;
      padding-bottom: 8px;
      margin-bottom: 16px;
      text-shadow: 0 2px 6px rgba(42,114,216,0.2);
    }

    p.subtitle {
      text-align: center;
      font-size: 1rem;
      margin-bottom: 30px;
      color: #4a5a75;
      font-weight: 500;
    }

    .faq-item {
      border-radius: 12px;
      background: #f9fbff;
      margin-bottom: 6px;
      box-shadow: 0 6px 16px rgba(42, 114, 216, 0.08);
      transition: box-shadow 0.3s ease;
      cursor: pointer;
      border: 1px solid transparent;
      padding: 6px 12px;
    }

    .faq-item:hover {
      box-shadow: 0 10px 20px rgba(42, 114, 216, 0.15);
      border-color: #a6c1ff;
    }

    .faq-item:focus-within {
      outline: 2px solid #2a72d8;
      border-color: #2a72d8;
      outline: 3px solid #2a72d8;
    }

    .question {
      padding: 5px 20px;
      font-size: 0.85rem;
      font-weight: 600;
      color: #1e3559;
      display: flex;
      justify-content: space-between;
      background: linear-gradient(90deg, #e4f0ff 0%, #d6e5ff 100%);
      border-radius: 12px;
      transition: background 0.3s, color 0.3s;
      padding: 6px 12px !important;   /* less padding inside question */
    }

    .faq-item.active .question {
      background: linear-gradient(90deg, #2a72d8 0%, #1f59bb 100%);
      color: #fff;
      box-shadow: 0 4px 12px rgba(42,114,216,0.3);
    }

    .question:hover {
      background: linear-gradient(90deg, #c3dafd 0%, #aecbfd 100%);
      text-align:justify;
    }

    .question::after {
      content: '+';
      font-size: 1.2rem;
      font-weight: 900;
      color: #2a72d8;
      transition: transform 0.3s ease, color 0.3s ease;
    }

    .faq-item.active .question::after {
      content: '−';
      color: #fff;
      transform: rotate(180deg);
    }

    .answer {
      max-height: 0;
      overflow: hidden;
      padding: 0 30px;
      font-size: 0.85rem;
      line-height: 1.3;
      color: #33475b;
      background: #f0f6ff;
      border-left: 4px solid #2a72d8;
      border-radius: 0 0 12px 12px;
      opacity: 0;
      transition: max-height 0.4s ease, padding 0.4s ease, opacity 0.4s ease;
      text-align:justify;
      padding: 8px 12px 10px !important; /* compact padding */
    }

    .faq-item.active .answer {
      padding: 14px 30px 18px;
      max-height: 300px;
      opacity: 1;
    }

    @keyframes fadeInUp {
      0% { opacity: 0; transform: translateY(20px); }
      100% { opacity: 1; transform: translateY(0); }
    }

    @media (max-width: 650px) {
      main {
        padding: 24px 20px;
      }
      h1 {
        font-size: 2rem;
      }
      .question {
        font-size: 1rem;
        padding: 14px 22px;
      }
      .answer {
        font-size: 0.9rem;
        padding: 12px 22px 16px;
      }
    }

    #scrollToTop {
      position: fixed;
      bottom: 50px;
      right: 20px;
      background-color: #ff6347;
      color: white;
      border-radius: 50%;
      padding: 5px;
      font-size: 1rem;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
      border: none;
      cursor: pointer;
      z-index: 10000;
      transition: background-color 0.3s ease;
      display: none;
      opacity: 0;
      justify-content: center;
      align-items: center;
    }

    #scrollToTop.show {
      display: flex;
      opacity: 1;
    }

    #scrollToTop:hover {
      background-color: #4b0082;
    }

    #scrollToTop:focus {
      outline: none;
    }

    #scrollToTop:hover::after {
      content: " Go to top";
      font-size: 0.85rem;
      color: white;
      margin-left: 8px;
    }

/* Chatbot styles */
    /* Sleeker Chatbot Styles */
#faq-chatbot {
  padding: 16px 20px;
  background: #f5faff;
  border-radius: 10px;
  border: 1px solid #c9e1ff;
  box-shadow: 0 2px 10px rgba(42, 114, 216, 0.1);
  font-size: 0.95rem;
  margin-bottom: 25px;
  transition: box-shadow 0.3s ease;
}

#faq-chatbot h2 {
  font-family: 'Poppins', sans-serif;
  font-size: 1.0rem;
  color: #2a72d8;
  margin-bottom: 10px;
  font-weight: 600;
  display: flex;
  align-items: center;
}

#faq-chatbot h2::before {
  content: "🤖";
  margin-right: 8px;
  font-size: 1.4rem;
}

#chatbot-input {
  width: 100%;
  padding: 8px 10px;
  font-size: 0.95rem;
  border-radius: 6px;
  border: 1px solid #a4c4f5;
  box-sizing: border-box;
  transition: border-color 0.3s ease;
}

#chatbot-input:focus {
  outline: none;
  border-color: #2a72d8;
  box-shadow: 0 0 5px rgba(42,114,216,0.3);
}

#clear-chatbot {
  margin-top: 10px;
  padding: 6px 10px;
  font-size: 0.85rem;
  border: none;
  background-color: #2a72d8;
  color: white;
  border-radius: 6px;
  cursor: pointer;
  transition: background-color 0.3s ease;
  margin-right: 10px; /* add spacing between clear buttons */
}

#clear-chatbot:hover {
  background-color: #1f59bb;
}

#chatbot-response {
  margin-top: 0;
  font-size: 0.90rem;
  color: #1e3559;
  background: #e9f3ff;
  padding: 8px 12px;  /* Add some padding for better look */
  border-radius: 6px;
  border-left: 3px solid #2a72d8;
  white-space: pre-wrap;
  max-height: none;  /* Remove max height */
  overflow-y: visible;  /* Remove scroll */
}

/* --- Chatbot Enhancements --- */
.chatbot-input-wrapper {
  display: flex;
  align-items: center;
  background: #fff;
  border: 1px solid #a4c4f5;
  border-radius: 6px;
  padding: 6px 10px;
  margin-bottom: 4px;
  transition: border-color 0.3s ease;
}

.chatbot-input-wrapper:focus-within {
  border-color: #2a72d8;
  box-shadow: 0 0 5px rgba(42,114,216,0.3);
}
#faq-chatbot > * {
  margin-top: 0;
  margin-bottom: 0;
  padding-top: 0;
  padding-bottom: 0;
}

.chat-icon {
  font-size: 1.2rem;
  color: #2a72d8;
  margin-right: 8px;
}

#chatbot-input {
  border: none;
  flex: 1;
  font-size: 0.95rem;
  padding: 6px;
  outline: none;
  background: transparent;
}

#clear-chatbot {
  margin-top: 10px;
  padding: 6px 10px;
  font-size: 0.85rem;
  border: none;
  background-color: #2a72d8;
  color: white;
  border-radius: 6px;
  cursor: pointer;
  transition: background-color 0.3s ease;
}

#clear-chatbot:hover {
  background-color: #1f59bb;
}

.chat-entry {
  margin: 2px 0 !important;
  padding: 2px 0 !important;
  border-bottom: none!important;
  line-height: 1.2 !important;
  margin-bottom: 8px; /* smaller space between entries */
  padding-bottom: 0; /* remove extra padding if any */
}
hr {
  margin: 6px 0; /* reduce vertical spacing of horizontal line */
  border-top: 1px solid #cce; /* keep thin line */
}

.chat-entry:last-child {
  border-bottom: none !important;
}

.chat-entry strong {
  display: inline-block !important;
  margin-right: 4px !important;
 margin-bottom: 0 !important; /* Remove bottom margin if any */
}

.chat-entry mark {
  background-color: #fff3b0 !important;
  padding: 1px 3px !important;
  border-radius: 3px !important;
}

.chat-entry mark {
  background-color: #fff3b0; /* soft yellow */
  padding: 1px 3px;
  border-radius: 3px;
}

/* ✅ Fixed and Working Typing Dots Animation */
.typing {
  display: inline-flex;
  font-style: italic;
  color: #4a5a75;
  align-items: center;
  gap: 2px;
}

.typing span {
  display: inline-block;
  font-weight: bold;
  font-size: 1.2em;
  animation: blink 1.4s infinite;
}

.typing span:nth-child(2) {
  animation-delay: 0.2s;
}
.typing span:nth-child(3) {
  animation-delay: 0.4s;
}

@keyframes blink {
  0%, 80%, 100% {
    opacity: 0;
  }
  40% {
    opacity: 1;
  }
}

  </style>
</head>

<body>
  <button id="scrollToTop" onclick="window.scrollTo(0, 0);" title="Go to the top">⬆️</button>

  <!-- ✅ Breadcrumb will be inserted here by layout.js -->

  <main>
    <h1><span aria-hidden="true" style="margin-right: 8px;">❓</span>Frequently Asked Questions</h1>
<p class="subtitle"><span aria-hidden="true" style="margin-right: 6px;">🔍</span>Quick, easy answers to help you get the most out of your community experience.</p>

<!-- Chatbot Section -->
    <section id="faq-chatbot" aria-label="FAQ Chatbot">
  <h2>Need Help? Ask the FAQ Bot 🤖</h2>
  
  <!-- New Input with Chat Icon -->
  <div class="chatbot-input-wrapper">
    <span class="chat-icon" aria-hidden="true">💬</span>
    <input 
      type="text" 
      id="chatbot-input" 
      placeholder="Type your question or keyword here..." 
      aria-label="Ask the FAQ Bot"
    />
  </div>

  <!-- Fix Clear Chat and Clear History buttons: separate them properly -->
<button id="clear-chatbot" type="button" style="margin-right: 10px;">
  Clear Chat
</button>

<div id="chatbot-response" aria-live="polite" role="region"></div>
</section>

    <div class="faq-item" tabindex="0">
      <div class="question">⏰What is the due date for paying monthly maintenance charge?</div>
      <div class="answer">Maintenance charge must be paid on or before the 15th of the following month. Payments made thereafter will incur a late fee of ₹50.</div>
    </div>

      <div class="faq-item" tabindex="0">
      <div class="question">🔔What is the procedure for carrying out alterations, repairs, or installations within my flat?</div>
      <div class="answer">While residents are free to carry out work within their flats, the Association must be informed at least 7 days in advance to ensure that safety, structural integrity, and community norms are upheld during the process. Hence,residents must: &nbsp;
      <ul><li>Review the protocol available under Community Guidelines in the RESOURCE menu.</li>
          <li>Download  (available in the <a href="download-center.html">Download-Center</a>&nbsp;after AGM approval) and submit the filled form  at the association office.</li></ul>
      </div>
      </div>     

<div class="faq-item" tabindex="0">
      <div class="question">📝How do I book the community hall?</div>
      <div class="answer">You can book the Community Hall by filling out the <i>Community Hall Reservation Form</i> available on the Download Center page and submitting it to the Association Office located at the Community Hall on the 1st Floor.</div>
    </div>

    <div class="faq-item" tabindex="0">
      <div class="question">📞Whom should I contact for urgent maintenance issues?</div>
      <div class="answer"> You can contact Mr. Subhash Ch. Pal, the Office Executive, at <b>9073599299</b>.</div>
    </div>

    <div class="faq-item" tabindex="0">
      <div class="question">🕒What are the office hours for the management office?</div>
      <div class="answer">The management office is open from Monday to Saturday, <b>9:00 AM</b> to <b>12:00 Noon</b> and <b>4:00 PM</b> to <b>6:00 PM</b>. Sunday from <b>9:00 AM</b> to <b>12:00 Noon</b>.</div>
    </div>

    <div class="faq-item" tabindex="0">
      <div class="question">👮How can I contact the security service?</div>
      <div class="answer">Security service contact numbers are listed on the <b>Helpdesk & Contacts</b> page.</div>
    </div>

    <div class="faq-item" tabindex="0">
  	<div class="question">📲 Can I pay my fees online?</div>
 	 <div class="answer">Yes, you can conveniently pay your fees online using popular UPI apps such as Google Pay, PhonePe, Paytm, or BHIM. For more details about the Monthly Maintenance Charge, please refer to our <a href="general-guidelines-html">General Guidelines</a> page.</div>
	</div>

    <div class="faq-item" tabindex="0">
      <div class="question">🐾Are pets allowed in the society?</div>
      <div class="answer">Yes, pets are allowed, but we request all pet owners to follow community guidelines (please check 'Community Guidelines' under 'RESOURCE' in the navigation bar.</div>
    </div>

     <div class="faq-item" tabindex="0">
      <div class="question">📩How can I submit feedback or suggestions to the RWA?</div>
      <div class="answer">You can email us at <b>atarwa2005@gmail.com</b> or drop a note in the suggestion box at the office. We value your input—it helps us serve you better!</div>
    </div>

    <div class="faq-item" tabindex="0">
      <div class="question"> 📂Where can I find the latest GB or AGM minutes or community updates?</div>
      <div class="answer"> Visit the "Download Center" and check the Meeting Minutes section. We regularly upload AGM, GB meeting records, and important circulars there.</div>
    </div>

<div class="faq-item" tabindex="0">
  <div class="question">🏡 Where can I find the New Resident Guide?</div>
  <div class="answer">
    We have a dedicated <a href="new-resident-guide.html" style="color:#2a72d8; text-decoration:underline;">New Resident Guide</a> page designed to help you get started with everything you need to know as a newcomer to our community.
<p><i>🏢 All membership formalities including registration, documentation, and access rights are to be completed in-person at the RWA Office. Online facilities are provided only after successful verification.</i></p>
  </div>
</div>

  </main>

<script>
  // Accordion logic
  const faqItems = document.querySelectorAll('.faq-item');
  faqItems.forEach(item => {
    const question = item.querySelector('.question');
    question.setAttribute('role', 'button');
    question.setAttribute('tabindex', '0');
    question.setAttribute('aria-expanded', 'false');

    question.addEventListener('click', () => {
      const isActive = item.classList.contains('active');
      faqItems.forEach(i => {
        i.classList.remove('active');
        i.querySelector('.question').setAttribute('aria-expanded', 'false');
      });
      if (!isActive) {
        item.classList.add('active');
        question.setAttribute('aria-expanded', 'true');
      }
    });

    question.addEventListener('keydown', e => {
      if (e.key === 'Enter' || e.key === ' ') {
        e.preventDefault();
        question.click();
      }
    });
  });

  // Scroll to top button
  const scrollToTopBtn = document.getElementById('scrollToTop');
  window.addEventListener('scroll', () => {
    if (window.scrollY > 100) {
      scrollToTopBtn.classList.add('show');
    } else {
      scrollToTopBtn.classList.remove('show');
    }
  });

  scrollToTopBtn.addEventListener('click', () => {
    window.scrollTo({ top: 0, behavior: 'smooth' });
  });

  // Chatbot Elements
const chatbotInput = document.getElementById('chatbot-input');
const chatbotResponse = document.getElementById('chatbot-response');
const clearChatBtn = document.getElementById('clear-chatbot');

// Prepare FAQ data as before
const faqData = [...document.querySelectorAll('.faq-item')].map(item => {
  return {
    question: item.querySelector('.question').innerText,
    answer: item.querySelector('.answer').innerText
  };
});

// Normalize helper
function normalizeText(text) {
  return text.toLowerCase()
    .replace(/[.,/#!$%^&*;:{}=\-_`~()]/g, ' ')
    .replace(/\s+/g, ' ')
    .trim();
}

// Escape RegExp helper
function escapeRegExp(string) {
  return string.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
}

// Simple Levenshtein Distance for fuzzy matching (helps with typos)
function levenshteinDistance(a, b) {
  const matrix = Array.from({ length: b.length + 1 }, (_, i) => [i]);
  for (let j = 0; j <= a.length; j++) matrix[0][j] = j;
  for (let i = 1; i <= b.length; i++) {
    for (let j = 1; j <= a.length; j++) {
      if (b.charAt(i-1) === a.charAt(j-1)) matrix[i][j] = matrix[i-1][j-1];
      else matrix[i][j] = Math.min(
        matrix[i-1][j-1] + 1,
        matrix[i][j-1] + 1,
        matrix[i-1][j] + 1
      );
    }
  }
  return matrix[b.length][a.length];
}

// Highlight matched query words in text
function highlightMatch(text, query) {
  const words = query.split(' ').filter(Boolean);
  let highlighted = text;
  words.forEach(word => {
    const regex = new RegExp(`(${escapeRegExp(word)})`, 'gi');
    highlighted = highlighted.replace(regex, '<mark>$1</mark>');
  });
  return highlighted;
}

// Find closest matches by fuzzy distance (for suggestions)
function findClosestQuestions(query, maxResults=3) {
  const normalizedQuery = normalizeText(query);
  const distances = faqData.map(faq => {
    return {
      question: faq.question,
      distance: levenshteinDistance(normalizedQuery, normalizeText(faq.question))
    };
  });
  distances.sort((a,b) => a.distance - b.distance);
  return distances.slice(0, maxResults).map(d => d.question);
}

// Disable input helper
function setInputDisabled(disabled) {
  chatbotInput.disabled = disabled;
  if(disabled) chatbotInput.style.opacity = 0.6;
  else chatbotInput.style.opacity = 1;
}

// Handle Enter key
chatbotInput.addEventListener('keydown', async (e) => {
  if (e.key === 'Enter') {
    e.preventDefault();

    const rawQuery = chatbotInput.value.trim();
    if (!rawQuery) {
      chatbotResponse.innerHTML = `<div class="chat-entry"><strong>Bot:</strong> Please type a question or keyword.</div>`;
      return;
    }

    setInputDisabled(true);

    chatbotResponse.innerHTML = `<div class="chat-entry typing">Typing<span>.</span><span>.</span><span>.</span></div>`;

    // Simulate a small delay for "typing"
    await new Promise(resolve => setTimeout(resolve, 600));

    const normalizedQuery = normalizeText(rawQuery);
    const queryWords = normalizedQuery.split(' ').filter(Boolean);

    // Scoring FAQ based on multiple factors
    let matches = faqData.map(faq => {
      const normQ = normalizeText(faq.question);
      const normA = normalizeText(faq.answer);

      // Basic substring match scoring
      let score = 0;
      queryWords.forEach(word => {
        if (normQ.includes(word)) score += 3;
        if (normA.includes(word)) score += 1;
      });

      // Add fuzzy match bonus if close
      const levDist = levenshteinDistance(normalizedQuery, normQ);
      if (levDist <= 5) score += (5 - levDist);

      return score > 0 ? { ...faq, score } : null;
    }).filter(Boolean);

    matches.sort((a, b) => b.score - a.score);

    if (matches.length === 0) {
      // No direct matches - suggest closest questions
      const suggestions = findClosestQuestions(rawQuery);
      chatbotResponse.innerHTML = `
        <div class="chat-entry"><strong>Bot:</strong> Sorry, I couldn't find a direct answer. Here are some questions you might be interested in:</div>
        <ul>
          ${suggestions.map(q => `<li>${q}</li>`).join('')}
        </ul>
      `;
    } else {
      // Show top 3 matches
      const topMatches = matches.slice(0, 3);
      chatbotResponse.innerHTML = topMatches.map(match => `
        <div class="chat-entry">
          <strong>Q:</strong> ${highlightMatch(match.question, normalizedQuery)}<br>
          <strong>A:</strong> <div style="text-align: justify;">${highlightMatch(match.answer, normalizedQuery)}</div>

        </div>
      `).join('<hr style="margin:10px 0; border:none; border-top:1px solid #cce;">');
    }

    setInputDisabled(false);
  }
});

// Clear chat button logic
clearChatBtn.addEventListener('click', () => {
  chatbotInput.value = '';
  chatbotResponse.innerHTML = '';
  chatbotInput.focus();
});

</script>

<!-- ✅ This should be last -->
</body>
</html>
